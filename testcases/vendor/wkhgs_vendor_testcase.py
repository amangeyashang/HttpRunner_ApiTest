# -*- coding:utf-8 -*-
_author_ = 'Leo'
__date__ = '2021/2/22 15:03'

# NOTE: Generated By HttpRunner v3.1.4
# FROM: testcases\demo_testcase_request.yml

from httprunner import HttpRunner, Config, Step, RunRequest, RunTestCase

class TestCaseDemoTestcaseRequest(HttpRunner):
    #环境配置
    config = (
        Config("卖家端测试用例")
            .variables(**{"vendorId":"546520236057329664","memberId":"2501","userId":"2501","depotCode":"VC10003","vendorCode":"VC10003"})    #全局变量
            .base_url("${ENV(base_url_vendor_develop_vendor)}")#访问域名
            .verify(False)  #是否验证服务器的TLS证书
            .export(*["vendorId"])   #导出用例变量

    )
    #测试步骤
    teststeps = [
        Step(
            RunRequest("IT-卖家端-获取商家用户角色")
            .with_variables(**{})
            .get("/vendorRegister/getUserVendorRoleByUserId")
            .with_params(**{"vendorId":"$vendorId","userId":"$userId"})
            .validate()
            .assert_equal("status_code",200)
            .assert_equal("body.msg","success")
        ),
        Step(
            RunRequest("IT-卖家端-卖家获取user信息")
            .with_variables(**{})
            .post("/users/getMemberId")
            .with_headers(
                **{
                    "User-Agent": "HttpRunner/${get_httprunner_version()}",
                    "Content-Type":"application/json",
                }
            )
            .with_params(**{"Authorization":"0ce8d7ae-5771-447b-835e-09e7f1ef8ec1"})
            .with_json(
                {
                    "vendorId": "$vendorId"
                }
            )
            .validate()
            .assert_equal("status_code",200)
            .assert_equal("body.msg","success")
        ),
    ]